随机播放的实现代码

```
    private fun recentlyPlayedOrShuffled() {
        Log.d(TAG, "onClick: mKwRadio" + ".startAPP(true)")
        Log.d(TAG, "onClick: recentList = $recentList")
        if (recentList.isNotEmpty()) {
            Log.d(TAG, "onClick: mKwRadio" + ".setPlayState(PlayState.STATE_PLAY)")
            mKwRadio.startAPP(true)
        } else {
            mKwRadio.fetchCarRecommend { resultInfo, bookBeans ->
                if (resultInfo.retCode == HttpResultCodeConstants.OK) { //获取成功
                    Log.d(TAG, "onFetched: bookBeans = $bookBeans")
                    //随机播放bookBeans中的一本书
                    if (bookBeans != null && bookBeans.size > 0) {
                        val index = (Math.random() * bookBeans.size).toInt()
                        val bookBean = bookBeans[index]
                        Log.d(TAG, "onFetched: bookBean = $bookBean")
//                        mKwRadio.playBook(bookBean, true) //app闪退
                        mKwRadio.startAPP(true)
                    }
                } else {
                    //获取失败
                    Log.d(TAG, "onFetched: 获取失败")
                    Toast.makeText(application, application.getString(R.string.network_error), Toast.LENGTH_SHORT).show()
                }
            }
        }
    }
```



使用`mKwRadio.playBook(bookBean, true)`时，酷我畅听闪退。

```
2023-04-19 17:27:31.177  8806-8806  QJL_2.5                 com.qj.car.qjlauncher                D  center widget: Radio
2023-04-19 17:27:31.177  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start
2023-04-19 17:27:31.177  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null
2023-04-19 17:27:31.178  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null status = 0
2023-04-19 17:27:31.178  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus result==INIT
2023-04-19 17:27:31.178  8806-8806  RadioViewModel          com.qj.car.qjlauncher                D  onClick: mKwRadio.getPlayerStatus() = INIT
2023-04-19 17:27:31.178  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start
2023-04-19 17:27:31.178  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null
2023-04-19 17:27:31.178  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null status = 0
2023-04-19 17:27:31.178  8806-8806  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus result==INIT
2023-04-19 17:27:31.179  8806-8806  RadioViewModel          com.qj.car.qjlauncher                D  onClick: mKwRadio.startAPP(true)
2023-04-19 17:27:31.179  8806-8806  RadioViewModel          com.qj.car.qjlauncher                D  onClick: recentList = []
2023-04-19 17:27:31.180  8806-8912  TsRequset               com.qj.car.qjlauncher                E  run!!!!!!
2023-04-19 17:27:31.182  8806-8912  NetworkSecurityConfig   com.qj.car.qjlauncher                D  No Network Security Config specified, using platform default
2023-04-19 17:27:31.685  8806-8912  TsRequset               com.qj.car.qjlauncher                E  fetchBookRankFreeData:
2023-04-19 17:27:31.685  8806-8912  TsRequset               com.qj.car.qjlauncher                D  request complete:505
2023-04-19 17:27:31.688  8806-8806  RadioViewModel          com.qj.car.qjlauncher                D  onFetched: bookBeans = [BookBean{lsrc='null', psrc='null', mBookId=27964557, mName='德云社精品相声专场', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img2.kuwo.cn/star/albumcover/700/71/15/4257266108.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27938936, mName='曹鹤阳相声精选', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/55/41/1243722074.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=7985318, mName='神医喜来乐', mTitle='以小人物看大世界', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img3.kuwo.cn/star/albumcover/700/85/69/3546147012.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=28023995, mName='德云社小曲小调（持续更新）', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/14/99/4100169922.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27963224, mName='【时间轴】德云少班主成长史', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/5/13/4217107811.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=10344699, mName='好习惯故事 | 宝宝巴士故事', mTitle='养成好习惯，宝宝一生都受益', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/27/93/3269530118.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27963279, mName='德云社“学”系列专辑', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/55/10/302266389.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27963422, mName='德云社对口相声精选集', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img3.kuwo.cn/star/albumcover/700/19/66/11709376.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=28023996, mName='德云社小园子专辑', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/12/71/775600012.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27202444, mName='儿童经典童话寓言故事', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/97/90/3599034073.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=10344697, mName='十万个奇思妙想 | 宝宝巴士大百科', mTitle='知识小百科 发现大世界', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img2.kuwo.cn/star/albumcover/700/66/62/606646361.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=28024266, mName='郭德纲&于谦明天见', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img3.kuwo.cn/star/albumcover/700/9/27/32799122.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=1368503, mName='至尊龙帝', mTitle='仙帝，魔帝算什么，战神蚩尤是哥的小弟', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/77/38/253564169.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27965622, mName='德云社相声专场', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img3.kuwo.cn/star/albumcover/700/65/5/3254708567.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27963421, mName='德云社2018相声专场', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img2.kuwo.cn/star/albumcover/700/52/56/1181820626.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=7016848, mName='王传林：忠义侠骨（80回）', mTitle='王传林经典评书', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albu
2023-04-19 17:27:31.688  8806-8806  RadioViewModel          com.qj.car.qjlauncher                D  onFetched: bookBean = BookBean{lsrc='null', psrc='null', mBookId=27964526, mName='德云社纲丝节精选', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img3.kuwo.cn/star/albumcover/700/92/21/143698861.jpg', mBigImgUrl='null', mStateType=-1}
2023-04-19 17:27:31.707  8806-8806  QJL_2.5                 com.qj.car.qjlauncher                D  onPause
2023-04-19 17:27:31.709  8806-8806  QJL_2.5                 com.qj.car.qjlauncher                D  onStop dwj.intent.action.BACK_HOME 5s
2023-04-19 17:27:31.882  8806-8806  KwTsApiImpl             com.qj.car.qjlauncher                E  bindAutoSdkService start
2023-04-19 17:27:31.882  8806-8806  KwTsApiImpl             com.qj.car.qjlauncher                E  bindAutoSdkService != null
2023-04-19 17:27:31.883  8806-8806  AutoSdkService          com.qj.car.qjlauncher                E  绑定后台服务服务成功
2023-04-19 17:27:31.883  8806-8806  RadioViewModel          com.qj.car.qjlauncher                I  onEnter: 
2023-04-19 17:27:34.467  8806-8806  AutoSdkService          com.qj.car.qjlauncher                E  音乐盒后台服务断开
2023-04-19 17:27:34.467  8806-8806  AutoSdkService          com.qj.car.qjlauncher                E  音乐盒后台服务断开 listener ！= null
```



使用`mKwRadio.startAPP(true)`能正常打开

```
2023-04-19 17:25:02.360  6848-6848  QJL_2.5                 com.qj.car.qjlauncher                D  center widget: Radio
2023-04-19 17:25:02.360  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start
2023-04-19 17:25:02.360  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null
2023-04-19 17:25:02.361  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null status = 0
2023-04-19 17:25:02.361  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus result==INIT
2023-04-19 17:25:02.361  6848-6848  RadioViewModel          com.qj.car.qjlauncher                D  onClick: mKwRadio.getPlayerStatus() = INIT
2023-04-19 17:25:02.361  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start
2023-04-19 17:25:02.361  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null
2023-04-19 17:25:02.361  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus start mIAutoSdkAidlInterface != null status = 0
2023-04-19 17:25:02.361  6848-6848  Tag                     com.qj.car.qjlauncher                E  getPlayerStatus result==INIT
2023-04-19 17:25:02.361  6848-6848  RadioViewModel          com.qj.car.qjlauncher                D  onClick: mKwRadio.startAPP(true)
2023-04-19 17:25:02.362  6848-6848  RadioViewModel          com.qj.car.qjlauncher                D  onClick: recentList = []
2023-04-19 17:25:02.362  6848-7066  TsRequset               com.qj.car.qjlauncher                E  run!!!!!!
2023-04-19 17:25:02.852  6848-7066  TsRequset               com.qj.car.qjlauncher                E  fetchBookRankFreeData:
2023-04-19 17:25:02.853  6848-7066  TsRequset               com.qj.car.qjlauncher                D  request complete:491
2023-04-19 17:25:02.853  6848-6848  RadioViewModel          com.qj.car.qjlauncher                D  onFetched: bookBeans = [BookBean{lsrc='null', psrc='null', mBookId=27963388, mName='德云社2013年相声合集', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/0/3/2157770518.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27963224, mName='【时间轴】德云少班主成长史', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/5/13/4217107811.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27965622, mName='德云社相声专场', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img3.kuwo.cn/star/albumcover/700/65/5/3254708567.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27955565, mName='德云社“大”字作品系列', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img2.kuwo.cn/star/albumcover/700/62/78/1431518008.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27965509, mName='德云社群口相声合集', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img2.kuwo.cn/star/albumcover/700/61/13/2135139651.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27965281, mName='德云社全球巡演专辑', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img2.kuwo.cn/star/albumcover/700/61/57/3047749404.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27965575, mName='德云社相声（高清伴睡）', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/40/40/1198949406.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=10279912, mName='马敬伯经典相声作品集', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/83/90/3224558085.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=19175626, mName='婴儿催眠曲5分钟必睡', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img3.kuwo.cn/star/albumcover/700/25/28/3140040453.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27955449, mName='德云鼓曲社专辑', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img2.kuwo.cn/star/albumcover/700/86/50/4217608013.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27965519, mName='德云社天津站专辑', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/20/86/95905849.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=27963279, mName='德云社“学”系列专辑', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/55/10/302266389.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=10500816, mName='【京剧】马连良精选集', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/59/11/1109366137.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=28023996, mName='德云社小园子专辑', mTitle='', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/12/71/775600012.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=10344692, mName='经典童话故事 | 宝宝巴士故事', mTitle='经典童话故事', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/54/36/1501298614.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBookId=7016848, mName='王传林：忠义侠骨（80回）', mTitle='王传林经典评书', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img1.kuwo.cn/star/albumcover/700/72/59/3030988839.jpg', mBigImgUrl='null', mStateType=-1}
                                                                                                    , BookBean{lsrc='null', psrc='null', mBook
2023-04-19 17:25:02.853  6848-6848  RadioViewModel          com.qj.car.qjlauncher                D  onFetched: bookBean = BookBean{lsrc='null', psrc='null', mBookId=27505143, mName='中华上下五千年 ▏写给儿童的中国历史故事', mTitle='通俗易懂的中国历史"百科全书”', mArtist='', mCount=0, mPlayCount=0, mImgUrl='http://img4.kuwo.cn/star/albumcover/700/76/66/1320931996.jpg', mBigImgUrl='null', mStateType=-1}
2023-04-19 17:25:02.853  6848-6848  startAPP                com.qj.car.qjlauncher                E  startAPP
2023-04-19 17:25:02.853  6848-6848  startAPP                com.qj.car.qjlauncher                E  startActivity
2023-04-19 17:25:02.870  6848-6848  QJL_2.5                 com.qj.car.qjlauncher                D  onPause
2023-04-19 17:25:02.872  6848-6848  QJL_2.5                 com.qj.car.qjlauncher                D  onStop dwj.intent.action.BACK_HOME 5s
2023-04-19 17:25:03.037  6848-6848  KwTsApiImpl             com.qj.car.qjlauncher                E  bindAutoSdkService start
2023-04-19 17:25:03.037  6848-6848  KwTsApiImpl             com.qj.car.qjlauncher                E  bindAutoSdkService != null
2023-04-19 17:25:03.039  6848-6848  AutoSdkService          com.qj.car.qjlauncher                E  绑定后台服务服务成功
2023-04-19 17:25:03.039  6848-6848  RadioViewModel          com.qj.car.qjlauncher                I  onEnter: 

```

